// This file was generated by SquareLine Studio
// SquareLine Studio version: SquareLine Studio 1.5.0
// LVGL version: 9.1.0
// Project name: SquareLine_Project

#include "ui.h"
#include "../CommonData.h"
#include "../CommonLibrary.h"

void Init()
{
    // Brightness
    sys_gui::Brightness.SetValue(100);
    lv_slider_set_value(ui_sldBrightness, sys_gui::Brightness.GetValue(), LV_ANIM_OFF);
}

void AutoUpdate()
{
    if (TempEvent.GetState())
    {
        auto tempEvent = TempEvent.GetValue();

        if (std::get<FIRST_EVENT>(tempEvent) && std::get<SECOND_EVENT>(tempEvent))
        {
            if (tempEvent == CorrectEvent.GetValue())
            {
                sys_gui::SuccessState.SetValue(true);
            }
            else
            {
                sys_host::StrikeState.SetValue(true);
            }

            TempEvent.SetValue(std::make_tuple(0, 0, 0));
        }
    }

    if (sys_gui::SuccessState.GetValue() != INCORRECT)
    {
        lv_obj_clear_flag(ui_imgResult, LV_OBJ_FLAG_HIDDEN);

        if (sys_gui::SuccessState.GetValue() == STATE_UNCHECK)
        {
            lv_obj_add_state(ui_imgResult, LV_STATE_DISABLED);
        }
        else if (sys_gui::SuccessState.GetValue() == STATE_CHECKED)
        {
            lv_obj_add_state(ui_imgResult, LV_STATE_CHECKED);
        }
    }
}

void OnBrightnessChange(lv_event_t* e)
{
    sys_gui::Brightness.SetValue(lv_slider_get_value(ui_sldBrightness));
}

void OnButtonPress(lv_event_t * e)
{
    auto tempEvent = TempEvent.GetValue();
    std::get<FIRST_EVENT>(tempEvent) = LV_EVENT_LONG_PRESSED;

    TempEvent.SetValue(tempEvent);
}

void OnButtonClick(lv_event_t * e)
{
    auto tempEvent = TempEvent.GetValue();
    auto firstEvent = std::get<FIRST_EVENT>(tempEvent);

    if (firstEvent != LV_EVENT_LONG_PRESSED)
    {
        std::get<FIRST_EVENT>(tempEvent) = LV_EVENT_CLICKED;
    }

    TempEvent.SetValue(tempEvent);
}

void OnButtonRelease(lv_event_t * e)
{
    auto tempEvent = TempEvent.GetValue();
    std::get<SECOND_EVENT>(tempEvent) = LV_EVENT_RELEASED;

    TempEvent.SetValue(tempEvent);
}
